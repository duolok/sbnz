package rules.enemy;

import com.ftn.sbnz.model.models.*;

rule "Rain Reduces Fire Damage - Modify"
    agenda-group "weather-effects"
    salience 75
    no-loop true
    when
        $context : GameContext(weather == "rain")
        $enemy : Enemy($dmg : damage, statusEffects contains "fire") from enemyCandidates
    then
        modify($enemy) {
            setDamage($dmg * 0.8)
        }
        System.out.println("Rain reduced fire damage for " + $enemy.getName());
end

rule "Fog Enhances Stealth - Modify"
    agenda-group "weather-effects"
    salience 75
    no-loop true
    when
        $context : GameContext(weather == "fog")
        $enemy : Enemy($score : score) from enemyCandidates
    then
        modify($enemy) {
            addAbility("stealth"),
            setScore($score + 10)
        }
        System.out.println("Fog enhanced stealth for " + $enemy.getName());
end

rule "Sandstorm Enhances Desert Enemies - Modify"
    agenda-group "weather-effects"
    salience 75
    no-loop true
    when
        $context : GameContext(weather == "sandstorm", region == "desert")
        $enemy : Enemy($dmg : damage, $score : score, region == "desert") from enemyCandidates
    then
        modify($enemy) {
            setDamage($dmg * 1.2),
            addAbility("sand-veil"),
            setScore($score + 15)
        }
        System.out.println("Sandstorm enhanced " + $enemy.getName());
end

rule "Snow Enhances Ice Enemies - Modify"
    agenda-group "weather-effects"
    salience 75
    no-loop true
    when
        $context : GameContext(weather == "snow")
        $enemy : Enemy($dmg : damage, $def : defense, statusEffects contains "ice") from enemyCandidates
    then
        modify($enemy) {
            setDamage($dmg * 1.2),
            setDefense($def * 1.1)
        }
        System.out.println("Snow enhanced ice abilities for " + $enemy.getName());
end